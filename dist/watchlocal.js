(()=>{"use strict";var e={880:e=>{e.exports=require("@babel/runtime/helpers/interopRequireDefault")},408:e=>{e.exports=require("chokidar")},147:e=>{e.exports=require("tinify")},292:e=>{e.exports=require("fs/promises")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{var e=r(880),t=e(r(408)),n=e(r(147)),i=e(r(292));const s="tinify",o=["NpmW5gDcjz1WgMg7JLJMwLZ26Gps7clY","mh1DJYXnv2nVG9PVpkFvhVNssFgMtpn5"],u=/\.(jpe?g|png|webp)$/,a=new Set;function c(e=!1){e&&o.push(o.shift()),n.default.key=o[0]}t.default.watch(["/Users/wangchunyang/Pictures/tinify"],{persistent:!0,ignored:[new RegExp("\\."+s+"\\.[^.]+$"),/ignore/],alwaysStat:!0,ignoreInitial:!0}).on("add",((e,t)=>{e&&t&&async function(e,t){c();const[r,o]=e.split(/\.(?=[^.]+$)/);if(!u.test(e))return;if(a.has(e))return;if(0===t.size&&(t=await function(e){return new Promise(((t,r)=>{let n=-1,s=-1,o=null;const u=()=>{n=setTimeout((()=>{i.default.stat(e).then((e=>{o=e,e.size>0?(t(e),clearTimeout(s)):u()}))}),500)};u(),s=setTimeout((()=>{t(o),clearTimeout(n)}),6e4)}))}(e)),!t||t.size<5120)return;a.add(e);const l=r+`.${s}.`+o;console.log("compress",l);const f=(t=!0)=>{n.default.fromFile(e).toFile(l).then((()=>{a.delete(e),n.default.compressionCount<20&&c(!0)})).catch((r=>{r instanceof n.default.ClientError?a.delete(e):(r instanceof n.default.AccountError&&c(!0),t&&setTimeout((()=>{f(!1)}),3e3)),console.error("tinify err",r)}))};f()}(e,t)}))})(),module.exports={}})();